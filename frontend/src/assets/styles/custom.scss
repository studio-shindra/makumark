@use "parts/fonts.scss";
@use "parts/ios.scss" as ios;


html, body {
	height: 100vh;
	height: 100dvh; // 動的ビューポート高さ（モバイルブラウザ対応）
	overflow: hidden; // スクロールを防ぐ
	margin: 0;
	padding: 0;
}

body{
	font-family: "Helvetica Neue", "Helvetica", "Hiragino Sans", "Arial", "Yu Gothic", "Meiryo", sans-serif;
	// 背景画像の上に白いオーバーレイを重ねて明るくする
	background-image: 
		linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)),
		url(../images/bg.webp);
	background-size: cover;
	background-repeat: no-repeat;
	background-position: center;
	// セーフエリアのpaddingはbodyではなく、必要な要素に個別に適用
}

nav{
	font-family: 'montserrat';
}

.df-center{
  display: flex !important;
  align-items: center!important;
  justify-content: center!important;
}


.main-page{
  height: 100vh;
  height: 100dvh; // 動的ビューポート高さ（モバイルブラウザ対応）
  display: flex;
  flex-direction: column;
  overflow: hidden; // スクロールを防ぐ
  gap: 24px;
}

.header {
  min-height: 140px;
  flex-shrink: 0; // 縮小しないように
  // // セーフエリアのpadding-topを適用（iOSのステータスバー/ノッチの下に配置）
  // @include ios.safe-area-inset-top;
  // 左右のセーフエリアも適用（必要に応じて）
  @include ios.safe-area-inset-left;
  @include ios.safe-area-inset-right;
}

main {
  flex: 1; // 残りのスペースを占める
  overflow: auto; // 必要に応じてスクロール
  min-height: 0; // Flexboxの縮小を適切に動作させるため
}

.footer {
  min-height: 140px;
  flex-shrink: 0; // 縮小しないように
  // セーフエリアのpadding-bottomを適用（iOSのホームインジケーターの上に配置）
  @include ios.safe-area-inset-bottom;
  // 左右のセーフエリアも適用（必要に応じて）
  @include ios.safe-area-inset-left;
  @include ios.safe-area-inset-right;
}

.share-button-area{
    bottom: 80px;
  .area{
    border-radius: 100px;
    
    // ボタンのアクティブ状態（クリック後の反転）を無効化
    .btn {
      &:active,
      &:focus,
      &:focus-visible {
        outline: none !important;
        box-shadow: none !important;
        background-color: transparent !important;
        border-color: transparent !important;
      }
      
      // btn-outline-secondaryのアクティブ状態も無効化
      &.btn-outline-secondary {
        &:active,
        &:focus,
        &:focus-visible {
          background-color: transparent !important;
          border-color: transparent !important;
          color: inherit !important;
        }
      }
    }
  }
}

.author{
  &::before{
    content: '';
    width:40px;
    height: 1px;
    background-color: rgb(71, 71, 71);
    gap: 16px;
  }
}
.share-area{
  .main-text-area{
      flex: 1; // 可変の高さにする
      display: flex;
      flex-direction: column;
      overflow: hidden; // スクロールを防ぐ
      min-height: 0; // Flexboxの縮小を適切に動作させるため
    .main-text{
      flex: 1; // 残りのスペースを占める
      writing-mode: vertical-rl;
      /* 縦書きでの折返し・はみ出し対策 */
      text-orientation: upright;
      white-space: pre-wrap;
      overflow-wrap: anywhere;
      word-break: break-word;
      overflow: visible; // 折り返しを許可
      font-family: "Times New Roman", "YuMincho", "Hiragino Mincho ProN", "Yu Mincho", "MS PMincho", serif;
      width: 100%;
      max-height: 100%; // 親の高さを超えないように
      height: calc(100vh - 140px - 140px - 100px);  //header,footer,authorの３つを足して、vhから引く
    }
    .author-area {
      flex-shrink: 0; // 縮小しないように固定
    }
  }
}



.vertical {
  writing-mode: vertical-rl;
}


.share-author{
	font-size: 16px;
	margin-top: 16px;
}

.share-icon{
	.text{
		font-family: "montserrat";
	}
}

// テキストのフェードイン/アウトアニメーション
.fade-text-enter-active {
  transition: opacity 0.5s cubic-bezier(0.2, 0, 0, 1);
}

.fade-text-leave-active {
  transition: opacity 0.4s cubic-bezier(0.2, 0, 0, 1);
}

.fade-text-enter-from,
.fade-text-leave-to {
  opacity: 0;
}

// カレンダーボタンのスライドアニメーション
.day-buttons {
  position: relative;
  overflow: auto;
  pointer-events: auto;
  
  .slide-day-move,
  .slide-day-enter-active,
  .slide-day-leave-active {
    transition: transform 0.6s cubic-bezier(0.2, 0, 0, 1),
                opacity 0.45s cubic-bezier(0.2, 0, 0, 1);
  }

  // ボタンの選択表示（丸）がふわっと現れるようにトランジション
  .btn {
    transition: background-color 0.36s cubic-bezier(0.2,0,0,1),
                color 0.36s cubic-bezier(0.2,0,0,1),
                transform 0.36s cubic-bezier(0.2,0,0,1),
                opacity 0.36s cubic-bezier(0.2,0,0,1);
    /* iOS タッチ対応 */
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    cursor: pointer;
  }
  
  .slide-day-enter-from {
    opacity: 0;
    transform: translateX(20px);
  }
  
  .slide-day-leave-to {
    opacity: 0;
    transform: translateX(-20px);
  }
  
  .slide-day-leave-active {
    position: absolute;
  }
}

.share-canvas  {
  position: absolute;
  left: -9999px;
  width: 600px;
  height: 100%;
  min-height: 400px;
  padding: 40px;
  .share-area{
    height: 100%;
    width: 100%;
    .main-text{
      display: flex;
      align-items: end;
      justify-content: center;
      flex-direction: column;
      writing-mode: unset;
      font-family: "Times New Roman", "YuMincho", "Hiragino Mincho ProN", "Yu Mincho", "MS PMincho", serif;
    }
    .share-author{
      display: flex;
      justify-content: center;
      align-items: end;
      flex-direction: column;
      width: 100%;
    }
  }
}